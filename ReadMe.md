Всевозможные решения nplusone проблемы. Разбросал по веткам.

<h2> Master </h2> 

- проблема присутствует. 

Для каждого автора мы делаем запрос на получение книг. 
Если авторов миллион, то и запросов будет миллион + 1.

Описание про каждый тип будет в его ветке

<h2> Fetch(FetchMode.JOIN) </h2>

`fetch`

<h2> EntityGraph </h2>

`entitygraph`

<h2> Query с JOIN FETCH </h2>

`query`

Использование JOIN FETCH в JPQL-запросах: При выполнении JPQL-запросов можно использовать оператор JOIN FETCH для одновременной загрузки основной сущности и связанных с ней сущностей, что позволяет избежать дополнительных запросов.

Преимущества:

* Уменьшение количества SQL-запросов.
* Простота реализации в конкретных случаях.

Недостатки:

* Неудобно для частого использования, так как требует явного указания в каждом запросе.
* Может привести к `избыточной выборке данных`, если не требуется загрузка всех связанных сущностей.

Напишем такой запрос в репозитории 
```java
@Query("select a from Author a join fetch a.books")
Author findAllWithQuery();
```

Сгенерированный запрос

```sql
select a1_0.id,b1_0.author_id,b1_0.id,b1_0.title,a1_0.name from author a1_0 join book b1_0 on a1_0.id=b1_0.author_id
```


<h2> BatchSize </h2>

`batchsize`